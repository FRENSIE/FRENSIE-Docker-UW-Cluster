#!/bin/bash
##---------------------------------------------------------------------------##
## CONFIGURE FACEMC with CMAKE
##---------------------------------------------------------------------------##

EXTRA_ARGS=$@
HDF5_PREFIX_PATH=@UW_CLUSTER_FRENSIE_GROUP_SOFTWARE_DIR@/hdf5
MOAB_PREFIX_PATH=@UW_CLUSTER_FRENSIE_GROUP_SOFTWARE_DIR@/moab/moab-5
DAGMC_PREFIX_PATH=@UW_CLUSTER_FRENSIE_GROUP_SOFTWARE_DIR@/dagmc
BOOST_PREFIX_PATH=@UW_CLUSTER_FRENSIE_GROUP_SOFTWARE_DIR@/boost
MPI_PREFIX_PATH=@UW_CLUSTER_FRENSIE_GROUP_SOFTWARE_DIR@/mpi
ROOT_PREFIX_PATH=@UW_CLUSTER_FRENSIE_GROUP_SOFTWARE_DIR@/root
SWIG_PREFIX_PATH=@UW_CLUSTER_FRENSIE_GROUP_SOFTWARE_DIR@/swig
DOXYGEN_PREFIX_PATH=@UW_CLUSTER_FRENSIE_GROUP_SOFTWARE_DIR@/doxygen
FRENSIE_SRC=@UW_CLUSTER_USER_DIR@/@FRENSIE_CHECKOUT_DIR@/src
FRENSIE_INSTALL=@UW_CLUSTER_USER_DIR@/@FRENSIE_CHECKOUT_DIR@/
XSDIR_PATH=

cmake --version

cmake \
    -D CMAKE_INSTALL_PREFIX:PATH=$FRENSIE_INSTALL \
    -D CMAKE_BUILD_TYPE:STRING=@CMAKE_BUILD_TYPE@ \
    -D CMAKE_VERBOSE_CONFIGURE:BOOL=OFF \
    -D CMAKE_VERBOSE_MAKEFILE:BOOL=ON \
    -D CMAKE_C_COMPILER=@UW_CLUSTER_FRENSIE_GROUP_SOFTWARE_DIR@/gcc/bin/gcc \
    -D CMAKE_FORTRAN_COMPILER=@UW_CLUSTER_FRENSIE_GROUP_SOFTWARE_DIR@/gcc/bin/gfortran \
    -D CMAKE_CXX_COMPILER=@UW_CLUSTER_FRENSIE_GROUP_SOFTWARE_DIR@/gcc/bin/g++ \
    -D CMAKE_CXX_FLAGS:STRING="-D_GLIBCXX_USE_CXX11_ABI=0" \
    -D MPIEXEC_FLAGS:STRING="--allow-run-as-root" \
    -D FRENSIE_ENABLE_DBC:BOOL=@FRENSIE_ENABLE_DBC@ \
    -D FRENSIE_ENABLE_COLOR_OUTPUT:BOOL=OFF \
    -D FRENSIE_ENABLE_OPENMP:BOOL=ON \
    -D FRENSIE_ENABLE_MPI:BOOL=ON \
    -D FRENSIE_ENABLE_MOAB:BOOL=ON \
    -D FRENSIE_ENABLE_DAGMC:BOOL=ON \
    -D FRENSIE_ENABLE_ROOT:BOOL=OFF \
    -D FRENSIE_ENABLE_PROFILING:BOOL=OFF \
    -D FRENSIE_ENABLE_COVERAGE:BOOL=OFF \
    -D FRENSIE_ENABLE_EXPLICIT_TEMPLATE_INST:BOOL=ON \
    -D ROOT_PREFIX:PATH=$ROOT_PREFIX_PATH \
    -D MOAB_PREFIX:PATH=$MOAB_PREFIX_PATH \
    -D DAGMC_PREFIX:PATH=$DAGMC_PREFIX_PATH \
    -D HDF5_PREFIX:PATH=$HDF5_PREFIX_PATH \
    -D BOOST_PREFIX:PATH=$BOOST_PREFIX_PATH \
    -D MPI_PREFIX:PATH=$MPI_PREFIX_PATH \
    -D SWIG_PREFIX:PATH=$SWIG_PREFIX_PATH \
    -D DOXYGEN_PREFIX:PATH=$DOXYGEN_PREFIX_PATH \
    -D FRENSIE_ENABLE_DASHBOARD_CLIENT:BOOL=ON \
    -D XSDIR:PATH=$XSDIR_PATH \
    -D BUILDNAME_PREFIX:STRING=$DISTRO_VERSION \
    $EXTRA_ARGS \
    $FRENSIE_SRC
